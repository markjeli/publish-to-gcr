name: ci

on:
  push:
    branches:
      - 'master'

jobs:
  docker:
    runs-on: ubuntu-latest
    steps:
        # need checkout before using compose-action
        - uses: actions/checkout@v3
        - uses: isbang/compose-action@v1.4.1  
          with:
            compose-file: "./docker/docker-compose.yml"
            down-flags: "--volumes"
            services: |
              helloworld2
              helloworld3

      # - name: Build and push
      #   uses: mr-smithers-excellent/docker-build-push@v5
      #   with:
      #     image: test
      #     tag: latest
      #     content: .
      #     registry: ghcr.io
      #     # githubOrg: markjeli # optional
      #     username: ${{ github.actor }}
      #     password: ${{ secrets.CR_PAT2 }}